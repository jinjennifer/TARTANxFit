{% extends "TxFApp/base.html" %}
{% block content %}

<div class="row">
	<div class="col-xs-12">
		<h3> {{competition.name}} </h3>
	</div>
</div>
<div class="row competition">
	<div class="col-xs-12 col-sm-8">
	<div class="col-xs-12 dot-border comp-desc">
		<i class="fa fa-info-circle icon"></i> Description: {{competition.description}}<br>
		<i class="fa fa-gift icon"></i> Reward: {{competition.reward}}  <br>
	</div>
	</div>
	<div class="col-xs-12 col-sm-4">
			<div class="btn btn-lg btn-block btn-primary" onclick="facebookShare();"><i class="fa fa-share icon"></i> Share</div>
			
            <form class="" action="/competitions/{{competition.id}}/" enctype="multipart/form-data" method="post">
                <input name="competition_id" type="hidden" value="{{competition.id}}"/>
                <button id="leaveGroupButton" class='btn btn-lg btn-block btn-danger margin-top-10 points'><i class="fa fa-times fa-lg"></i>&nbsp; Leave Group</button>
                {% csrf_token %}
            </form>
	</div>
</div>

<div class="row">
	<div class="col-xs-12">
		<ul class="list-group">
			{% for member in members %}
				{% if member.id == uid %}
				<li class="list-group-item current-user">
					<span class="points"><i class="fa fa-diamond icon" ></i> {{member.profile.points}}</span>
					{{forloop.counter}}. {{member.first_name}} {{member.last_name}}
				</li>
				{% else %}
				<li class="list-group-item">
					<span class="points"><i class="fa fa-diamond icon" ></i> {{member.profile.points}}</span>
					{{forloop.counter}}. {{member.first_name}} {{member.last_name}}
				</li>
				{% endif %}
			{% endfor %}
		</ul>
	</div>
</div>

<div class="row">
	<div class="col-xs-12">
		<canvas id="competition-graph" width="600" height="400"></canvas>
	</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>

<script>
	var competition = $("#competition-graph");
    var myChart = new Chart(competition, {
    type: 'bar',
    data: {
        labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"],
        datasets: [{
            label: '# of Votes',
            data: [12, 19, 3, 5, 2, 3],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255,99,132,1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:true
                }
            }]
        }
    }
});

</script>

{% endblock %}